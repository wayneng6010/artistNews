(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},23:function(e,t,a){},42:function(e,t,a){e.exports=a(80)},47:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),s=a.n(c),l=(a(47),a(5)),i=a.n(l),o=a(13),m=a(14),d=a(15),u=a(17),h=a(16),p=(a(22),a(8)),v=a.n(p),E=a(12),b=a.n(E),_=(a(23),a(10)),g=a(40),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).getAllArtist=function(){v.a.get("/getAllArtist").then((function(t){e.setState({})})).catch((function(e){console.log(e)}))},e.startup=Object(o.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/getArtist?artist_search=".concat(e.state.search),console.log(a),t.next=4,v.a.get(a).then((function(t){console.log(t),e.setState({isLoaded:!0,items:t.data.data})})).catch((function(e){alert("Error: ",e)}));case 4:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var t=Object(o.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==e.state.search.trim()){t.next=6;break}return b.a.alert("Empty input"),t.abrupt("return");case 6:e.setState({isLoaded:!1});case 7:return n="/getArtist?artist_search=".concat(e.state.search),console.log(n),t.next=11,v.a.get(n).then((function(t){return console.log(t),0===t.data.total?(b.a.alert("Artist Not Found"),void e.setState({isLoaded:!0})):"error"in t.data?(b.a.alert("Error: "+t.data.error.type+" -> "+t.data.error.message),void e.setState({isLoaded:!0})):void e.setState({isLoaded:!0,items:t.data.data})})).catch((function(e){console.log(e)}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){t.preventDefault(),e.setState({search:t.target.value})},e.state={items:[],isLoaded:!1,search:""},e.startup(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getAllArtist()}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.items;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{class:"header"},r.a.createElement("div",null,r.a.createElement(_.b,{to:"/savedArtist"},r.a.createElement("button",{id:"manage_btn",class:"btn btn-success btn-lg"},"Manage")),r.a.createElement("h1",{class:"m-0 p-0"},"Artist and News API"),r.a.createElement("p",{class:"m-0 p-0"},"Discover your favourite artist and their news"),r.a.createElement("br",null),r.a.createElement("div",{class:"search d-flex justify-content-center"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("form",{name:"search_form",id:"search_form",onSubmit:this.handleSubmit},r.a.createElement("div",{class:"input-group mb-2"},r.a.createElement("input",{placeholder:"Search for artist",type:"text",className:"form-control",name:"artist_search",onChange:this.handleChange}),r.a.createElement("div",{class:"input-group-append"},r.a.createElement("input",{id:"search_submit_btn",class:"btn btn-secondary",type:"submit",value:"Search"}))),r.a.createElement("br",null)),r.a.createElement("br",null)),r.a.createElement("div",null,r.a.createElement(b.a,null))),t?"":r.a.createElement(g.a,{animation:"border",variant:"light"}))),r.a.createElement("div",{class:"result pt-5"},a.map((function(e){return r.a.createElement(_.b,{to:{pathname:"/eachArtist/".concat(e.id,",").concat(e.name)}},r.a.createElement("div",{class:"item eachArtist",key:e.id},r.a.createElement("img",{class:"item_head",src:e.picture_medium,width:"100%",height:"auto",alt:"Artist Image"}),r.a.createElement("div",{class:"item_body_outer"},r.a.createElement("div",{class:"item_body"},r.a.createElement("h5",{class:"name mb-4"},e.name.length<=35?e.name:e.name.substring(0,35)+"..."),r.a.createElement("div",null,r.a.createElement("p",{class:"fansNum d-inline-block w-50 text-center"},e.nb_fan,r.a.createElement("span",null,"\xa0Fans")),r.a.createElement("p",{class:"albumNum d-inline-block w-50 text-center"},e.nb_album,r.a.createElement("span",null,"\xa0Albums")))))))}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(79);var k=a(2),w=a(18),A=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).startup=function(){var t="/getArtistTopTrack?artist_id=".concat(e.state.artist_id);console.log(t),v.a.get(t).then((function(t){console.log(t),0!==t.data.total?"error"in t.data?b.a.alert("Error: "+t.data.error.type+" -> "+t.data.error.message):e.setState({top_tracks:t.data.data}):e.setState({top_tracks:"none"})})).catch((function(e){alert("Error: ",e)}));var a="/getArtistRelatedNews?artist_name=".concat(e.state.artist_name);console.log(a),v.a.get(a).then((function(t){if(console.log(t),0!==t.data.totalResults)return"error"===t.data.status?(b.a.alert("Error: "+t.data.code+" -> "+t.data.message),void e.setState({related_news:"none"})):void e.setState({related_news:t.data.articles});e.setState({related_news:"none"})})).catch((function(e){alert("Error: ",e)}))},e.saveArtist=function(){var t="/saveArtist?artist_id=".concat(e.state.artist_id);console.log(t),v.a.get(t).then((function(e){console.log(e),alert("Saved Successful")})).catch((function(e){alert("Error: ",e)}))},e.checkSavedArtist=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/getSameArtist?artist_id=".concat(e.state.artist_id)).then((function(e){return console.log(e),!!e.data})).catch((function(e){alert("Error: ",e)}));case 2:t.sent?alert("Artist has been saved before"):e.saveArtist();case 4:case"end":return t.stop()}}),t)}))),e.componentDidMount=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.artist_id=e.props.match.params.artist_id,e.state.artist_name=e.props.match.params.artist_name,e.startup();case 3:case"end":return t.stop()}}),t)}))),e.state={artist_id:null,artist_name:null,top_tracks:[],related_news:[]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.artist_name,a=e.top_tracks,n=e.related_news;return r.a.createElement("div",{id:"eachArtist_body",class:"pb-3"},r.a.createElement("div",{class:"nav_bar"},r.a.createElement(_.b,{class:"back_link",to:"/"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/725/725004.svg",width:"30",height:"auto"})),r.a.createElement("div",{class:"page_title"},t),r.a.createElement(_.b,{class:"manage_btn2_outer",to:"/savedArtist"},r.a.createElement("button",{id:"manage_btn2",variant:"light",class:"btn btn-success btn-lg"},"Manage"))),r.a.createElement("div",{id:"eachArtist_content"},r.a.createElement("p",{class:"text-right"},r.a.createElement(w.a,{onClick:this.checkSavedArtist,id:"save_artist_btn"},"+\xa0\xa0Save This Artist")),r.a.createElement("div",{id:"top_track"},r.a.createElement("h3",{id:"top_track_title"},"Top Tracks"),r.a.createElement("p",{id:"top_track_content"},"none"===a?r.a.createElement("h5",null,"Top tracks of this artist is not available at the moment"):a.map((function(e){return r.a.createElement("div",{class:"each_track"},r.a.createElement("p",{class:"track_title"},e.title),r.a.createElement("p",{class:"track_recording"},r.a.createElement("audio",{controls:!0,volume:"0.1"},r.a.createElement("source",{src:e.preview,type:"audio/ogg"}))),r.a.createElement("div",{class:"track_link"},r.a.createElement("a",{href:e.link,target:"_blank"},r.a.createElement(w.a,{variant:"info"},"Full Song"))))})))),r.a.createElement("div",null,r.a.createElement(b.a,null)),r.a.createElement("div",{id:"related_news"},r.a.createElement("h3",{class:"mt-2 mb-4",id:"related_news_title"},"Related News"),r.a.createElement("p",{id:"related_news_content"},"none"==n?r.a.createElement("h5",null,"No related news at the moment"):n.map((function(e){return r.a.createElement("a",{class:"each_news_link",href:e.url,target:"_blank"},r.a.createElement("div",{class:"item each_news"},r.a.createElement("div",{class:"item_head each_news"},r.a.createElement("img",{src:e.urlToImage,width:"100%",height:"auto",alt:"News Image"})),r.a.createElement("div",{class:"item_body_outer each_news"},r.a.createElement("div",{class:"item_body"},r.a.createElement("h5",{class:"name each_news mt-3 mb-3"},e.title.length<=200?e.title:e.title.substring(0,200)+"..."),r.a.createElement("div",{class:"news_source_date"},r.a.createElement("p",{class:"d-inline-block w-50 text-center"},r.a.createElement("span",{class:"news_source"},e.source.name)),r.a.createElement("p",{class:"d-inline-block w-50 text-center"},r.a.createElement("span",{class:"news_date"},e.publishedAt.substring(0,10))))))))}))))))}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).getAllArtist=function(){console.log("/getAllArtist"),v.a.get("/getAllArtist").then((function(t){console.log(t),""!=t.data?e.setState({saved_artist:t.data}):e.setState({saved_artist:"none"})})).catch((function(e){alert("Error: ",e)}))},e.deleteArtist=function(t){var a="/deleteArtist?artist_id=".concat(t);v.a.get(a).then((function(t){e.getAllArtist()})).catch((function(e){alert("Error: ",e)}))},e.componentDidMount=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getAllArtist();case 1:case"end":return t.stop()}}),t)}))),e.state={saved_artist:[]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state.saved_artist;return r.a.createElement("div",{id:"eachArtist_body",class:"pb-3"},r.a.createElement("div",{class:"nav_bar"},r.a.createElement(_.b,{class:"back_link",to:"/"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/725/725004.svg",width:"30",height:"auto"})),r.a.createElement("div",{class:"page_title"},"Bookmark")),r.a.createElement("div",{id:"eachArtist_content"},r.a.createElement("div",{id:"related_news"},r.a.createElement("h3",{class:"mt-2 mb-4",id:"related_news_title"},"Saved Artist"),r.a.createElement("div",{class:"result pt-4 pb-2 savedArtist"},r.a.createElement("p",{class:"text-center"},"none"===t?r.a.createElement("h5",null,"No saved artist at the moment"):t.map((function(t){return r.a.createElement("div",{class:"item eachArtist eachSavedArtist",key:t.ID},r.a.createElement("img",{class:"item_head",src:t.PictureURL,width:"100%",height:"auto",alt:"Artist Image"}),r.a.createElement("div",{class:"item_body_outer eachSavedArtist"},r.a.createElement("div",{class:"item_body"},r.a.createElement("h5",{class:"name mb-4 text-center"},t.Name.length<=35?t.Name:t.Name.substring(0,35)+"..."),r.a.createElement("div",{class:"mb-3"},r.a.createElement("p",{class:"fansNum d-inline-block w-50 text-center"},t.FansNum,r.a.createElement("span",null,"\xa0Fans")),r.a.createElement("p",{class:"albumNum d-inline-block w-50 text-center"},t.AlbumNum,r.a.createElement("span",null,"\xa0Albums"))),r.a.createElement(_.b,{class:"fansNum d-inline-block w-50 text-center px-2",target:"_blank",to:{pathname:"/eachArtist/".concat(t.ID,",").concat(t.Name)}},r.a.createElement(w.a,{variant:"primary",size:"sm",block:!0},"View")),r.a.createElement("div",{class:"fansNum d-inline-block w-50 text-center px-2"},r.a.createElement(w.a,{onClick:function(){window.confirm("Delete this artist from bookmark?")&&e.deleteArtist(t.ID)},variant:"dark",size:"sm",block:!0},"Delete")))))})))))))}}]),a}(n.Component),y=function(){return r.a.createElement(_.a,null,r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/",component:f,exact:!0}),r.a.createElement(k.a,{path:"/eachArtist/:artist_id,:artist_name",component:A}),r.a.createElement(k.a,{path:"/savedArtist/",component:S})))};s.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.dbffbe75.chunk.js.map